/* Modern Blackjack Table UI (themeable) */
:root {
  /* Table felt */
  --table-felt-1: #0a6b41;
  --table-felt-2: #095c39;
  --table-rim: #3a2b16;
  --table-rim-highlight: #5b4122;
  --table-shadow: rgba(0, 0, 0, 0.45);
  --table-glow: #41e39f;

  /* Cards */
  --card-bg: #fffdfa;
  --card-foreground: #111111;
  --card-border: #e7e2d8;
  --card-back: #103a73;
  --card-back-accent: #0f2d58;
  --suit-red: #d03838;
  --suit-black: #151515;

  /* Chips */
  --chip-text: #ffffff;
  --chip-shadow: rgba(0,0,0,.35);
  --chip-red: #e44b4b;
  --chip-blue: #3f71ff;
  --chip-green: #28b87a;
  --chip-gold: #f0c245;
  --chip-silver: #cfd6e3;

  /* UI */
  --btn-bg: #1b2838;
  --btn-fg: #e9f1ff;
  --btn-bg-hover: #26364b;

  /* Metrics */
  --radius-outer: 24px;
  --radius-card: 10px;
  --card-w: 6.6rem;
  --gap: 0.8rem;
  --chip-size: 3.1rem;
  --outline: 2px;
}

@media (prefers-color-scheme: dark) {
  :root {
    --table-felt-1: #095238;
    --table-felt-2: #063e2b;
    --table-rim: #2b2012;
    --table-rim-highlight: #4a351b;
    --table-shadow: rgba(0,0,0,.6);

    /* Keep card face bright; define text explicitly (bug fix) */
    --card-bg: #fffefb;
    --card-foreground: #111111;
    --card-border: #e8e2d6;
    --card-back: #0d2f5f;
    --card-back-accent: #0a2244;

    --btn-bg: #0f1720;
    --btn-fg: #e7eefc;
    --btn-bg-hover: #172231;
  }
}

/* Wrapper vignette (page section that contains the table card) */
.bj-wrapper {
  padding: 2rem 1rem 3rem;
  background:
    radial-gradient(120% 140% at 50% 10%, rgba(0,0,0,.25) 0%, transparent 55%),
    radial-gradient(120% 120% at 50% 120%, rgba(0,0,0,.35) 0%, transparent 60%);
}

/* Main table container */
.bj-table {
  max-width: 1100px;
  margin: 0 auto;
  border-radius: var(--radius-outer);
  position: relative;
  box-shadow:
    0 24px 60px -16px var(--table-shadow),
    inset 0 1px 0 rgba(255,255,255,.06);
  overflow: hidden;
  isolation: isolate;
}

/* Felt + rim */
.bj-table .table-rim {
  position: relative;
  border-radius: var(--radius-outer);
  padding: 1.2rem;
  background:
    linear-gradient(180deg, var(--table-rim-highlight), var(--table-rim));
}
.bj-table .table-rim::before {
  content: "";
  position: absolute;
  inset: 6px;
  border-radius: calc(var(--radius-outer) - 6px);
  background:
    radial-gradient(120% 90% at 50% 10%, rgba(255,255,255,.08), transparent 55%),
    radial-gradient(120% 140% at 50% 120%, rgba(0,0,0,.25), transparent 60%),
    linear-gradient(180deg, var(--table-felt-1), var(--table-felt-2));
  box-shadow: inset 0 0 0 2px rgba(255,255,255,.03);
  z-index: 0;
}
/* Felt noise overlay */
.bj-table .table-rim::after {
  content: "";
  position: absolute;
  inset: 6px;
  border-radius: calc(var(--radius-outer) - 6px);
  opacity: .08;
  background-image:
    radial-gradient(1px 1px at 10% 20%, rgba(255,255,255,.5) 0 50%, transparent 51%),
    radial-gradient(1px 1px at 30% 80%, rgba(0,0,0,.6) 0 50%, transparent 51%),
    radial-gradient(1px 1px at 70% 30%, rgba(0,0,0,.5) 0 50%, transparent 51%),
    radial-gradient(1px 1px at 80% 60%, rgba(255,255,255,.42) 0 50%, transparent 51%);
  background-size: 120px 120px, 140px 140px, 160px 160px, 200px 200px;
  mix-blend-mode: overlay;
  pointer-events: none;
  z-index: 0;
}

.dealer-area,
.player-area { position: relative; z-index: 1; }
.dealer-area { min-height: 11rem; display: flex; justify-content: center; align-items: flex-start; padding-top: 1.2rem; }
.player-area { padding: 1rem 1.2rem 1.6rem; }

.hand, .dealer-cards, .hand-cards { display:flex; align-items:center; gap: calc(var(--gap) * 0.8); }
.hand { min-height: calc(var(--card-w) * 1.35); justify-content:center; }

/* Cards */
.bj-card, .card { /* support both component and vanilla card */
  width: var(--card-w);
  aspect-ratio: 64/89;
  background: var(--card-bg);
  border-radius: var(--radius-card);
  border: 1px solid var(--card-border);
  box-shadow: 0 2px 0 rgba(255,255,255,.35) inset, 0 6px 18px rgba(0,0,0,.28);
  position: relative;
  font-weight: 700;
  -webkit-font-smoothing: antialiased;
  color: var(--card-foreground);
}
.bj-card .bj-card-corner,
.card .rank,
.card .suit { position:absolute; left:.5rem; top:.45rem; line-height:1; font-size:1.1rem; }
.bj-card .bj-card-corner .bj-card-suit { font-size: .95rem; }
.bj-card .bj-card-corner-bottom { top:auto; bottom:.45rem; left:auto; right:.5rem; transform: rotate(180deg); }

/* suit colors and contrast fix */
.bj-card--red, .card[data-suit="hearts"], .card[data-suit="diamonds"] { color: var(--suit-red); }
.bj-card--black, .card[data-suit="clubs"], .card[data-suit="spades"] { color: var(--suit-black); }

/* Card back */
.bj-card-back, .card.back {
  background: repeating-linear-gradient(45deg, var(--card-back) 0 10px, var(--card-back-accent) 10px 20px);
  border-color: rgba(255,255,255,.2);
  box-shadow: 0 6px 18px rgba(0,0,0,.32), inset 0 0 0 2px rgba(255,255,255,.08);
}

/* Dealer score badge */
.badge-score, .dealer-score .badge { display:inline-flex; align-items:center; justify-content:center; min-width:36px; height:28px; padding:0 8px; border-radius:9999px; background: rgba(0,0,0,0.35); color:#fff; font-weight:700; box-shadow: 0 2px 8px rgba(0,0,0,0.2); }

/* Pot target */
.pot { position:absolute; left:50%; bottom:45%; transform:translateX(-50%); width:13rem; height:9rem; border-radius:50%; background: radial-gradient(60% 60% at 50% 60%, rgba(0,0,0,.35), transparent 60%), radial-gradient(50% 50% at 50% 70%, rgba(255,255,255,.1), transparent 60%); pointer-events:none; }

/* Chip buttons - keep React class name chip-eur */
.chips-row { display:flex; flex-wrap:wrap; gap:.6rem; align-items:center; }
.chip-eur {
  --size: var(--chip-size);
  width: var(--size); height: var(--size);
  border-radius: 50%; border: 0; color: var(--chip-text);
  font-weight: 800; letter-spacing: .02em; cursor: pointer; position: relative; isolation: isolate;
  background: radial-gradient(circle at 50% 38%, rgba(255,255,255,.9), rgba(255,255,255,0) 55%),
             conic-gradient(from 0deg, rgba(255,255,255,.25), rgba(255,255,255,0) 50%, rgba(0,0,0,.2) 50%, rgba(0,0,0,0) 100%),
             var(--chip-color, var(--chip-blue));
  box-shadow: 0 10px 18px -6px var(--chip-shadow), inset 0 0 0 5px rgba(255,255,255,.3), inset 0 0 0 10px rgba(0,0,0,.25);
}
.chip-eur::before, .chip-eur::after { content:""; position:absolute; inset:7px; border-radius:50%; }
.chip-eur::before { background: radial-gradient(circle at 50% 30%, rgba(255,255,255,.7), rgba(255,255,255,0) 55%), radial-gradient(circle, rgba(0,0,0,.15), transparent 60%); mix-blend-mode: screen; }
.chip-eur::after { inset: 13px; background: rgba(0,0,0,.25); filter: blur(6px); opacity: .25; z-index: -1; }
.chip-eur .chip-eur-label { position: relative; z-index: 1; font-weight: 800; font-size: .95rem; text-shadow: 0 1px 2px rgba(0,0,0,.35); }
.chip-eur .chip-eur-euro { position: absolute; bottom: 6px; right: 8px; font-size: .75rem; color: rgba(255,255,255,0.9); font-weight: 700; }
.chip-eur:focus-visible { outline: var(--outline) solid #90c2ff; outline-offset: 3px; }

/* Denomination colors */
.chip-eur-1   { --chip-color: var(--chip-silver); color:#21324a }
.chip-eur-5   { --chip-color: var(--chip-red); }
.chip-eur-10  { --chip-color: var(--chip-blue); }
.chip-eur-20  { --chip-color: var(--chip-green); }
.chip-eur-50  { --chip-color: var(--chip-gold); color:#2d2100 }
.chip-eur-100 { --chip-color: var(--chip-blue); }
.chip-eur-500 { --chip-color: var(--chip-red); }
.chip-eur-1000 { --chip-color: #7c3aed; }
.chip-eur-5000 { --chip-color: #ec4899; }

/* Win glow + slight camera bump */
.bj-table.win .table-rim::before { box-shadow: 0 0 0 2px rgba(255,255,255,.08) inset, 0 0 0 4px rgba(255,255,255,.05) inset, 0 0 80px 8px color-mix(in oklab, var(--table-glow) 60%, transparent); }
.bj-table.win { animation: cameraBump 450ms ease-out; }
@keyframes cameraBump { 0% { transform: perspective(1000px) translateZ(0) scale(1); filter: none; } 100% { transform: perspective(1000px) translateZ(6px) scale(1.01); filter: saturate(1.05); } }

/* Confetti */
.confetti { position: fixed; width: 10px; height: 12px; border-radius: 2px; will-change: transform, opacity; animation: confettiFall 1200ms ease-in forwards; }
@keyframes confettiFall { 0% { transform: translate3d(0, -20px, 0) rotate(0deg); opacity: 1; } 100% { transform: translate3d(var(--cx, 0px), 110vh, 0) rotate(720deg); opacity: 0; } }

/* Chip fly */
.chip-eur.fly { position: fixed !important; z-index: 9999 !important; animation: flyToPot 520ms cubic-bezier(.2,.9,.3,1) forwards; will-change: transform, opacity; }
@keyframes flyToPot { 0% { transform: translate3d(0,0,0) scale(1); opacity: 1; } 100% { transform: translate3d(var(--tx,0), var(--ty,0), 0) scale(.78); opacity: .92; } }

/* Responsive */
.bj-table { font-size: clamp(13px, 1.1vw + .45rem, 16px); }
@media (max-width: 820px) { :root { --card-w: 5.6rem; --chip-size: 2.6rem; } .badge-score { right:.6rem; top:.45rem; } }
@media (max-width: 480px) { :root { --card-w: 4.7rem; --chip-size: 2.4rem; } }